# Lima VM configuration for Ubuntu 24.04 LTS
# Lightweight development environment

# Resource allocation (lightweight defaults)
cpus: 4
memory: '8GiB'
disk: '50GiB'

# SSH configuration
ssh:
  forwardAgent: true
  localPort: 0

# Mount home directory
mounts:
  - location: '~'
    writable: true
  - location: '/tmp/lima'
    writable: true

# Containerd disabled (not running containers)
containerd:
  system: false
  user: false

# Provision with cloud-init
provision:
  - mode: system
    script: |
      #!/bin/bash
      # Read and execute cloud-init configuration
      cloud-init status --wait

# Network configuration
networks:
  - lima: shared

# Port forwarding (common development ports)
portForwards:
  - guestPort: 3000
    hostPort: 3000
  - guestPort: 5000
    hostPort: 5000
  - guestPort: 8000
    hostPort: 8000
  - guestPort: 8080
    hostPort: 8080

# Environment variables passed to VM
env:
  TERM: xterm-256color

# Message displayed after VM starts
message: |
  Ubuntu 24.04 LTS VM is ready!

  To use dotfiles-vm:
    cd ~/projects/dotfiles-vm && ./install.sh

  SSH access:
    limactl shell vm
