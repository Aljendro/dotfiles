#!/usr/bin/env node

import yargs from 'yargs';
import { hideBin } from 'yargs/helpers';
import { loadCommands } from '../utils/commandLoader.js';

// Load and register all commands dynamically
const commands = await loadCommands();
const yargsInstance = yargs(hideBin(process.argv));

// Register each command
for (const command of commands) {
  yargsInstance.command(command);
}

// Configure yargs
yargsInstance
  .demandCommand(1, 'You need at least one command before moving on')
  .strict()
  .help()
  .alias('help', 'h')
  .parse();
