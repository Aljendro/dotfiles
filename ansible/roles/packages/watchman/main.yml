---
- name: Downloading watchman
  git:
    repo: 'https://github.com/facebook/watchman.git'
    dest: /tmp/watchman
    version: v4.9.0
    depth: 1

- name: Run autogen.sh for watchman
  shell: ./autogen.sh
  args:
    chdir: /tmp/watchman

- name: Run configure for watchman
  shell: ./configure --enable-lenient --disable-dependency-tracking
  args:
    chdir: /tmp/watchman

- name: Run make for watchman
  make:
    chdir: /tmp/watchman

- name: Install watchman
  become: yes
  make:
    chdir: /tmp/watchman
    target: install

